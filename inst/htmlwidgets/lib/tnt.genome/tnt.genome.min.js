! function t(e, n, r) {
    function o(a, s) {
        if (!n[a]) {
            if (!e[a]) {
                var c = "function" == typeof require && require;
                if (!s && c) return c(a, !0);
                if (i) return i(a, !0);
                throw new Error("Cannot find module '" + a + "'")
            }
            var u = n[a] = {
                exports: {}
            };
            e[a][0].call(u.exports, function(t) {
                var n = e[a][1][t];
                return o(n || t)
            }, u, u.exports, t, e, n, r)
        }
        return n[a].exports
    }
    for (var i = "function" == typeof require && require, a = 0; a < r.length; a++) o(r[a]);
    return o
}({
    1: [function(t, e, n) {
        "undefined" == typeof tnt && (e.exports = tnt = {}), tnt.board = t("./index.js"), tnt.utils = t("tnt.utils")
    }, {
        "./index.js": 2,
        "tnt.utils": 33
    }],
    2: [function(t, e, n) {
        e.exports = t("./src/index.js")
    }, {
        "./src/index.js": 41
    }],
    3: [function(t, e, n) {
        (function(r, o) {
            ! function(t, r) {
                "object" == typeof n && void 0 !== e ? e.exports = r() : "function" == typeof define && define.amd ? define(r) : t.ES6Promise = r()
            }(this, function() {
                "use strict";

                function e(t) {
                    return "function" == typeof t
                }
                var n = Array.isArray ? Array.isArray : function(t) {
                        return "[object Array]" === Object.prototype.toString.call(t)
                    },
                    i = 0,
                    a = void 0,
                    s = void 0,
                    c = function(t, e) {
                        g[i] = t, g[i + 1] = e, 2 === (i += 2) && (s ? s(v) : b())
                    };
                var u = "undefined" != typeof window ? window : void 0,
                    l = u || {},
                    f = l.MutationObserver || l.WebKitMutationObserver,
                    d = "undefined" == typeof self && void 0 !== r && "[object process]" === {}.toString.call(r),
                    h = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel;

                function p() {
                    var t = setTimeout;
                    return function() {
                        return t(v, 1)
                    }
                }
                var g = new Array(1e3);

                function v() {
                    for (var t = 0; t < i; t += 2) {
                        (0, g[t])(g[t + 1]), g[t] = void 0, g[t + 1] = void 0
                    }
                    i = 0
                }
                var m, y, _, x, b = void 0;

                function w(t, e) {
                    var n = arguments,
                        r = this,
                        o = new this.constructor(A);
                    void 0 === o[j] && U(o);
                    var i, a = r._state;
                    return a ? (i = n[a - 1], c(function() {
                        return D(a, o, i, r._result)
                    })) : M(r, o, t, e), o
                }

                function k(t) {
                    if (t && "object" == typeof t && t.constructor === this) return t;
                    var e = new this(A);
                    return S(e, t), e
                }
                d ? b = function() {
                    return r.nextTick(v)
                } : f ? (y = 0, _ = new f(v), x = document.createTextNode(""), _.observe(x, {
                    characterData: !0
                }), b = function() {
                    x.data = y = ++y % 2
                }) : h ? ((m = new MessageChannel).port1.onmessage = v, b = function() {
                    return m.port2.postMessage(0)
                }) : b = void 0 === u && "function" == typeof t ? function() {
                    try {
                        var e = t("vertx");
                        return a = e.runOnLoop || e.runOnContext,
                            function() {
                                a(v)
                            }
                    } catch (t) {
                        return p()
                    }
                }() : p();
                var j = Math.random().toString(36).substring(16);

                function A() {}
                var T = void 0,
                    E = 1,
                    C = 2,
                    q = new N;

                function R(t) {
                    try {
                        return t.then
                    } catch (t) {
                        return q.error = t, q
                    }
                }

                function P(t, n, r) {
                    n.constructor === t.constructor && r === w && n.constructor.resolve === k ? function(t, e) {
                        e._state === E ? z(t, e._result) : e._state === C ? I(t, e._result) : M(e, void 0, function(e) {
                            return S(t, e)
                        }, function(e) {
                            return I(t, e)
                        })
                    }(t, n) : r === q ? I(t, q.error) : void 0 === r ? z(t, n) : e(r) ? function(t, e, n) {
                        c(function(t) {
                            var r = !1,
                                o = function(t, e, n, r) {
                                    try {
                                        t.call(e, n, r)
                                    } catch (t) {
                                        return t
                                    }
                                }(n, e, function(n) {
                                    r || (r = !0, e !== n ? S(t, n) : z(t, n))
                                }, function(e) {
                                    r || (r = !0, I(t, e))
                                }, t._label);
                            !r && o && (r = !0, I(t, o))
                        }, t)
                    }(t, n, r) : z(t, n)
                }

                function S(t, e) {
                    var n;
                    t === e ? I(t, new TypeError("You cannot resolve a promise with itself")) : "function" == typeof(n = e) || "object" == typeof n && null !== n ? P(t, e, R(e)) : z(t, e)
                }

                function O(t) {
                    t._onerror && t._onerror(t._result), L(t)
                }

                function z(t, e) {
                    t._state === T && (t._result = e, t._state = E, 0 !== t._subscribers.length && c(L, t))
                }

                function I(t, e) {
                    t._state === T && (t._state = C, t._result = e, c(O, t))
                }

                function M(t, e, n, r) {
                    var o = t._subscribers,
                        i = o.length;
                    t._onerror = null, o[i] = e, o[i + E] = n, o[i + C] = r, 0 === i && t._state && c(L, t)
                }

                function L(t) {
                    var e = t._subscribers,
                        n = t._state;
                    if (0 !== e.length) {
                        for (var r = void 0, o = void 0, i = t._result, a = 0; a < e.length; a += 3) r = e[a], o = e[a + n], r ? D(n, r, o, i) : o(i);
                        t._subscribers.length = 0
                    }
                }

                function N() {
                    this.error = null
                }
                var H = new N;

                function D(t, n, r, o) {
                    var i = e(r),
                        a = void 0,
                        s = void 0,
                        c = void 0,
                        u = void 0;
                    if (i) {
                        if ((a = function(t, e) {
                                try {
                                    return t(e)
                                } catch (t) {
                                    return H.error = t, H
                                }
                            }(r, o)) === H ? (u = !0, s = a.error, a = null) : c = !0, n === a) return void I(n, new TypeError("A promises callback cannot return that same promise."))
                    } else a = o, c = !0;
                    n._state !== T || (i && c ? S(n, a) : u ? I(n, s) : t === E ? z(n, a) : t === C && I(n, a))
                }
                var F = 0;

                function U(t) {
                    t[j] = F++, t._state = void 0, t._result = void 0, t._subscribers = []
                }

                function B(t, e) {
                    this._instanceConstructor = t, this.promise = new t(A), this.promise[j] || U(this.promise), n(e) ? (this._input = e, this.length = e.length, this._remaining = e.length, this._result = new Array(this.length), 0 === this.length ? z(this.promise, this._result) : (this.length = this.length || 0, this._enumerate(), 0 === this._remaining && z(this.promise, this._result))) : I(this.promise, new Error("Array Methods must be provided an Array"))
                }

                function Y(t) {
                    this[j] = F++, this._result = this._state = void 0, this._subscribers = [], A !== t && ("function" != typeof t && function() {
                        throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")
                    }(), this instanceof Y ? function(t, e) {
                        try {
                            e(function(e) {
                                S(t, e)
                            }, function(e) {
                                I(t, e)
                            })
                        } catch (e) {
                            I(t, e)
                        }
                    }(this, t) : function() {
                        throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")
                    }())
                }

                function $() {
                    var t = void 0;
                    if (void 0 !== o) t = o;
                    else if ("undefined" != typeof self) t = self;
                    else try {
                        t = Function("return this")()
                    } catch (t) {
                        throw new Error("polyfill failed because global object is unavailable in this environment")
                    }
                    var e = t.Promise;
                    if (e) {
                        var n = null;
                        try {
                            n = Object.prototype.toString.call(e.resolve())
                        } catch (t) {}
                        if ("[object Promise]" === n && !e.cast) return
                    }
                    t.Promise = Y
                }
                return B.prototype._enumerate = function() {
                    for (var t = this.length, e = this._input, n = 0; this._state === T && n < t; n++) this._eachEntry(e[n], n)
                }, B.prototype._eachEntry = function(t, e) {
                    var n = this._instanceConstructor,
                        r = n.resolve;
                    if (r === k) {
                        var o = R(t);
                        if (o === w && t._state !== T) this._settledAt(t._state, e, t._result);
                        else if ("function" != typeof o) this._remaining--, this._result[e] = t;
                        else if (n === Y) {
                            var i = new n(A);
                            P(i, t, o), this._willSettleAt(i, e)
                        } else this._willSettleAt(new n(function(e) {
                            return e(t)
                        }), e)
                    } else this._willSettleAt(r(t), e)
                }, B.prototype._settledAt = function(t, e, n) {
                    var r = this.promise;
                    r._state === T && (this._remaining--, t === C ? I(r, n) : this._result[e] = n), 0 === this._remaining && z(r, this._result)
                }, B.prototype._willSettleAt = function(t, e) {
                    var n = this;
                    M(t, void 0, function(t) {
                        return n._settledAt(E, e, t)
                    }, function(t) {
                        return n._settledAt(C, e, t)
                    })
                }, Y.all = function(t) {
                    return new B(this, t).promise
                }, Y.race = function(t) {
                    var e = this;
                    return n(t) ? new e(function(n, r) {
                        for (var o = t.length, i = 0; i < o; i++) e.resolve(t[i]).then(n, r)
                    }) : new e(function(t, e) {
                        return e(new TypeError("You must pass an array to race."))
                    })
                }, Y.resolve = k, Y.reject = function(t) {
                    var e = new this(A);
                    return I(e, t), e
                }, Y._setScheduler = function(t) {
                    s = t
                }, Y._setAsap = function(t) {
                    c = t
                }, Y._asap = c, Y.prototype = {
                    constructor: Y,
                    then: w,
                    catch: function(t) {
                        return this.then(null, t)
                    }
                }, $(), Y.polyfill = $, Y.Promise = Y, Y
            })
        }).call(this, t("lYpoI2"), "undefined" != typeof self ? self : "undefined" != typeof window ? window : {})
    }, {
        lYpoI2: 4
    }],
    4: [function(t, e, n) {
        var r = e.exports = {};

        function o() {}
        r.nextTick = function() {
            var t = "undefined" != typeof window && window.setImmediate,
                e = "undefined" != typeof window && window.postMessage && window.addEventListener;
            if (t) return function(t) {
                return window.setImmediate(t)
            };
            if (e) {
                var n = [];
                return window.addEventListener("message", function(t) {
                        var e = t.source;
                        e !== window && null !== e || "process-tick" !== t.data || (t.stopPropagation(), n.length > 0 && n.shift()())
                    }, !0),
                    function(t) {
                        n.push(t), window.postMessage("process-tick", "*")
                    }
            }
            return function(t) {
                setTimeout(t, 0)
            }
        }(), r.title = "browser", r.browser = !0, r.env = {}, r.argv = [], r.on = o, r.addListener = o, r.once = o, r.off = o, r.removeListener = o, r.removeAllListeners = o, r.emit = o, r.binding = function(t) {
            throw new Error("process.binding is not supported")
        }, r.cwd = function() {
            return "/"
        }, r.chdir = function(t) {
            throw new Error("process.chdir is not supported")
        }
    }, {}],
    5: [function(t, e, n) {
        "use strict";
        var r, o;
        r = this, o = function(t) {
            return function(e) {
                if (!(e = e || t && t.Promise)) throw new Error("No Promise implementation found.");
                return {
                    processRequest: function(t) {
                        var n, r, o = t.onload,
                            i = t.onerror,
                            a = new e(function(t, e) {
                                n = t, r = e
                            });
                        t.onload = function(t) {
                            var e;
                            return o && (e = o.apply(this, arguments)), n(t), e
                        }, t.onerror = function(t) {
                            var e;
                            return i && (e = i.apply(this, arguments)), r(t), e
                        }, t.then = function() {
                            return a.then.apply(a, arguments)
                        }, t.catch = function() {
                            return a.catch.apply(a, arguments)
                        }
                    }
                }
            }
        }, "function" == typeof define && define.amd ? define(function() {
            return r.httppleasepromises = o(r)
        }) : "object" == typeof n ? e.exports = o(r) : r.httppleasepromises = o(r)
    }, {}],
    6: [function(t, e, n) {
        "use strict";
        var r = t("./response");

        function o(t, e) {
            var n = new Error(t);
            for (var r in n.name = "RequestError", this.name = n.name, this.message = n.message, n.stack && (this.stack = n.stack), this.toString = function() {
                    return this.message
                }, e) e.hasOwnProperty(r) && (this[r] = e[r])
        }
        o.prototype = Error.prototype, o.create = function(t, e, n) {
            var i = new o(t, n);
            return r.call(i, e), i
        }, e.exports = o
    }, {
        "./response": 9
    }],
    7: [function(t, e, n) {
        "use strict";
        var r, o = t("../plugins/cleanurl"),
            i = t("./xhr"),
            a = t("./utils/delay"),
            s = t("./error").create,
            c = t("./response"),
            u = t("./request"),
            l = t("xtend"),
            f = t("./utils/once");
        e.exports = function t(e, n) {
            function o(t, o) {
                var d, h, p, g, v;
                for (t = new u(l(e, t)), r = 0; r < n.length; r++)(h = n[r]).processRequest && h.processRequest(t);
                for (r = 0; r < n.length; r++)
                    if ((h = n[r]).createXHR) {
                        d = h.createXHR(t);
                        break
                    }
                for (g in d = d || new i, t.xhr = d, p = f(a(function(e) {
                        clearTimeout(v), d.onload = d.onerror = d.onreadystatechange = d.ontimeout = d.onprogress = null;
                        var i = e && e.isHttpError ? e : new c(t);
                        for (r = 0; r < n.length; r++)(h = n[r]).processResponse && h.processResponse(i);
                        e ? t.onerror && t.onerror(e) : t.onload && t.onload(i), o && o(e, i)
                    })), d.onreadystatechange = function() {
                        if (!t.timedOut)
                            if (t.aborted) p(s("Request aborted", t, {
                                name: "Abort"
                            }));
                            else if (4 === d.readyState) {
                            var e = Math.floor(d.status / 100);
                            if (2 === e) p();
                            else if (404 !== d.status || t.errorOn404) {
                                var n;
                                switch (e) {
                                    case 4:
                                        n = "Client";
                                        break;
                                    case 5:
                                        n = "Server";
                                        break;
                                    default:
                                        n = "HTTP"
                                }
                                var r = n + " Error: The server returned a status of " + d.status + ' for the request "' + t.method.toUpperCase() + " " + t.url + '"';
                                p(s(r, t))
                            } else p()
                        }
                    }, d.onload = function() {
                        p()
                    }, d.onerror = function() {
                        p(s("Internal XHR Error", t))
                    }, d.ontimeout = function() {}, d.onprogress = function() {}, d.open(t.method, t.url), t.timeout && (v = setTimeout(function() {
                        t.timedOut = !0, p(s("Request timeout", t, {
                            name: "Timeout"
                        }));
                        try {
                            d.abort()
                        } catch (t) {}
                    }, t.timeout)), t.headers) t.headers.hasOwnProperty(g) && d.setRequestHeader(g, t.headers[g]);
                return d.send(t.body), t
            }
            e = e || {}, n = n || [];
            var d, h = ["get", "post", "put", "head", "patch", "delete"],
                p = function(t) {
                    return function(e, n) {
                        return (e = new u(e)).method = t, o(e, n)
                    }
                };
            for (r = 0; r < h.length; r++) o[d = h[r]] = p(d);
            return o.plugins = function() {
                return n
            }, o.defaults = function(r) {
                return r ? t(l(e, r), n) : e
            }, o.use = function() {
                var r = Array.prototype.slice.call(arguments, 0);
                return t(e, n.concat(r))
            }, o.bare = function() {
                return t()
            }, o.Request = u, o.Response = c, o
        }({}, [o])
    }, {
        "../plugins/cleanurl": 14,
        "./error": 6,
        "./request": 8,
        "./response": 9,
        "./utils/delay": 10,
        "./utils/once": 11,
        "./xhr": 12,
        xtend: 13
    }],
    8: [function(t, e, n) {
        "use strict";

        function r(t) {
            var e = "string" == typeof t ? {
                url: t
            } : t || {};
            this.method = e.method ? e.method.toUpperCase() : "GET", this.url = e.url, this.headers = e.headers || {}, this.body = e.body, this.timeout = e.timeout || 0, this.errorOn404 = null == e.errorOn404 || e.errorOn404, this.onload = e.onload, this.onerror = e.onerror
        }
        r.prototype.abort = function() {
            if (!this.aborted) return this.aborted = !0, this.xhr.abort(), this
        }, r.prototype.header = function(t, e) {
            var n;
            for (n in this.headers)
                if (this.headers.hasOwnProperty(n) && t.toLowerCase() === n.toLowerCase()) {
                    if (1 === arguments.length) return this.headers[n];
                    delete this.headers[n];
                    break
                }
            if (null != e) return this.headers[t] = e, e
        }, e.exports = r
    }, {}],
    9: [function(t, e, n) {
        "use strict";
        var r = t("./request");

        function o(t) {
            var e, n, r, o = t.xhr;
            if (this.request = t, this.xhr = o, this.headers = {}, !t.aborted && !t.timedOut) {
                if (this.status = o.status || 0, this.text = o.responseText, this.body = o.response || o.responseText, this.contentType = o.contentType || o.getResponseHeader && o.getResponseHeader("Content-Type"), o.getAllResponseHeaders)
                    for (n = o.getAllResponseHeaders().split("\n"), e = 0; e < n.length; e++)(r = n[e].match(/\s*([^\s]+):\s+([^\s]+)/)) && (this.headers[r[1]] = r[2]);
                this.isHttpError = this.status >= 400
            }
        }
        o.prototype.header = r.prototype.header, e.exports = o
    }, {
        "./request": 8
    }],
    10: [function(t, e, n) {
        "use strict";
        e.exports = function(t) {
            return function() {
                var e = Array.prototype.slice.call(arguments, 0);
                setTimeout(function() {
                    return t.apply(null, e)
                }, 0)
            }
        }
    }, {}],
    11: [function(t, e, n) {
        "use strict";
        e.exports = function(t) {
            var e, n = !1;
            return function() {
                return n || (n = !0, e = t.apply(this, arguments)), e
            }
        }
    }, {}],
    12: [function(t, e, n) {
        e.exports = window.XMLHttpRequest
    }, {}],
    13: [function(t, e, n) {
        e.exports = function() {
            for (var t = {}, e = 0; e < arguments.length; e++) {
                var n = arguments[e];
                for (var r in n) n.hasOwnProperty(r) && (t[r] = n[r])
            }
            return t
        }
    }, {}],
    14: [function(t, e, n) {
        "use strict";
        e.exports = {
            processRequest: function(t) {
                t.url = t.url.replace(/[^%]+/g, function(t) {
                    return encodeURI(t)
                })
            }
        }
    }, {}],
    15: [function(t, e, n) {
        "use strict";
        var r = t("./jsonrequest"),
            o = t("./jsonresponse");
        e.exports = {
            processRequest: function(t) {
                r.processRequest.call(this, t), o.processRequest.call(this, t)
            },
            processResponse: function(t) {
                o.processResponse.call(this, t)
            }
        }
    }, {
        "./jsonrequest": 16,
        "./jsonresponse": 17
    }],
    16: [function(t, e, n) {
        "use strict";
        e.exports = {
            processRequest: function(t) {
                var e = t.header("Content-Type"),
                    n = e && -1 !== e.indexOf("application/json");
                (null == e || n) && t.body && (e || t.header("Content-Type", "application/json"), t.body = JSON.stringify(t.body))
            }
        }
    }, {}],
    17: [function(t, e, n) {
        "use strict";
        e.exports = {
            processRequest: function(t) {
                null == t.header("Accept") && t.header("Accept", "application/json")
            },
            processResponse: function(t) {
                if (t.contentType && /^.*\/(?:.*\+)?json(;|$)/i.test(t.contentType)) {
                    var e = "string" == typeof t.body ? t.body : t.text;
                    e && (t.body = JSON.parse(e))
                }
            }
        }
    }, {}],
    18: [function(t, e, n) {
        e.exports = t("./src/api.js")
    }, {
        "./src/api.js": 19
    }],
    19: [function(t, e, n) {
        e.exports = function(t) {
            var e, n = ((e = []).add_batch = function(t) {
                    e.unshift(t)
                }, e.update = function(t, n) {
                    for (var r = 0; r < e.length; r++)
                        for (var o in e[r])
                            if (o === t) return e[r][o] = n, !0;
                    return !1
                }, e.add = function(t, n) {
                    if (e.update(t, n));
                    else {
                        var r = {};
                        r[t] = n, e.add_batch(r)
                    }
                }, e.get = function(t) {
                    for (var n = 0; n < e.length; n++)
                        for (var r in e[n])
                            if (r === t) return e[n][r]
                }, e),
                r = function() {};
            r.check = function(e, n, o) {
                if (!(e instanceof Array)) return "function" == typeof e ? e.check(n, o) : t[e].check(n, o), r;
                for (var i = 0; i < e.length; i++) r.check(e[i], n, o)
            }, r.transform = function(e, n) {
                if (!(e instanceof Array)) return "function" == typeof e ? e.transform(n) : t[e].transform(n), r;
                for (var o = 0; o < e.length; o++) r.transform(e[o], n)
            };
            var o = function(e, r) {
                    var o = [],
                        i = [],
                        a = r.on_getter || function() {
                            return n.get(e)
                        },
                        s = r.on_setter || function(t) {
                            for (var r = 0; r < i.length; r++) t = i[r](t);
                            for (var a = 0; a < o.length; a++)
                                if (!o[a].check(t)) throw o[a].msg || "Value " + t + " doesn't seem to be valid for this method";
                            n.add(e, t)
                        },
                        c = function(e) {
                            return arguments.length ? (s(e), t) : a()
                        };
                    c.check = function(t, e) {
                        return arguments.length ? (o.push({
                            check: t,
                            msg: e
                        }), this) : o
                    }, c.transform = function(t) {
                        return arguments.length ? (i.push(t), this) : i
                    }, t[e] = c
                },
                i = function(t, e) {
                    if ("object" == typeof t)
                        for (var r in n.add_batch(t), t) o(r, e);
                    else n.add(t, e.default_value), o(t, e)
                };
            return r.getset = function(t, e) {
                return i(t, {
                    default_value: e
                }), r
            }, r.get = function(t, e) {
                return i(t, {
                    default_value: e,
                    on_setter: function() {
                        throw "Method defined only as a getter (you are trying to use it as a setter"
                    }
                }), r
            }, r.set = function(t, e) {
                return i(t, {
                    default_value: e,
                    on_getter: function() {
                        throw "Method defined only as a setter (you are trying to use it as a getter"
                    }
                }), r
            }, r.method = function(e, n) {
                if ("object" == typeof e)
                    for (var o in e) t[o] = e[o];
                else t[e] = n;
                return r
            }, r
        }
    }, {}],
    20: [function(t, e, n) {
        e.exports = t("./src/index")
    }, {
        "./src/index": 24
    }],
    21: [function(t, e, n) {
        var r = t("tnt.api"),
            o = t("tnt.utils").defer_cancel;
        e.exports = function() {
            "use strict";
            var t, e, n, i, a, s = [],
                c = 920,
                u = {
                    species: void 0,
                    chr: void 0,
                    from: 0,
                    to: 500
                },
                l = {
                    left: void 0,
                    right: void 0
                },
                f = d3.rgb("#F8FBEF"),
                d = d3.behavior.zoom(),
                h = {
                    min: 0,
                    max: 1e3,
                    zoom_out: 1e3,
                    zoom_in: 100
                },
                p = !0,
                g = {
                    ease: d3.ease("cubic-in-out"),
                    extend_canvas: {
                        left: 0,
                        right: 0
                    },
                    show_frame: !0
                },
                v = function(r) {
                    e = d3.select(r).attr("id"), d3.select(r).classed("tnt", !0);
                    var o = d3.select(r).append("div").attr("id", "tnt_" + e).style("position", "relative").classed("tnt_framed", !!g.show_frame).style("width", c + 6 + g.extend_canvas.right + g.extend_canvas.left + "px").append("div").attr("class", "tnt_groupDiv");
                    t = o.append("svg").attr("class", "tnt_svg").attr("width", c).attr("height", 0).attr("pointer-events", "all"), i = t.append("g").attr("transform", "translate(0,20)").append("g").attr("class", "tnt_g"), l.left = i.append("rect").attr("id", "tnt_" + e + "_5pcap").attr("x", 0).attr("y", 0).attr("width", 0).attr("height", 0).attr("fill", "red"), l.right = i.append("rect").attr("id", "tnt_" + e + "_3pcap").attr("x", c - 3).attr("y", 0).attr("width", 0).attr("height", 0).attr("fill", "red"), n = i.append("rect").attr("class", "tnt_pane").attr("id", "tnt_" + e + "_pane").attr("width", c).attr("height", 0).style("fill", f)
                },
                m = r(v).getset(g).getset(h).getset(u);
            m.transform(v.extend_canvas, function(t) {
                var e = v.extend_canvas();
                return t.left = t.left || e.left, t.right = t.right || e.right, t
            }), m.method("start", function() {
                h.max - h.min < h.zoom_out && (h.zoom_out = h.max - h.min), _();
                for (var t = 0; t < s.length; t++) s[t].g && s[t].g.remove(), b(s[t]);
                x(),
                    function() {
                        u.to - u.from < h.zoom_in && (u.from + h.zoom_in > h.max ? u.to = h.max : u.to = u.from + h.zoom_in);
                        for (var t = 0; t < s.length; t++) y(s[t], u)
                    }()
            }), m.method("update", function() {
                for (var t = 0; t < s.length; t++) y(s[t])
            });
            var y = function(t, e) {
                    t.data() && t.data().call(t, {
                        loc: e,
                        on_success: function() {
                            t.display().update.call(t, e)
                        }
                    })
                },
                _ = function() {
                    a = d3.scale.linear().domain([u.from, u.to]).range([0, c]), p && i.call(d.x(a).scaleExtent([(u.to - u.from) / (h.zoom_out - 1), (u.to - u.from) / h.zoom_in]).on("zoom", j))
                };
            m.method("scroll", function(t) {
                var e = Math.abs(t);
                t > 0 ? w(e, 1) : t < 0 && w(e, -1)
            }), m.method("zoom", function(t) {
                w(1 / t, 0)
            }), m.method("find_track", function(t) {
                for (var e = 0; e < s.length; e++)
                    if (s[e].id() === t) return s[e]
            }), m.method("remove_track", function(t) {
                t.g.remove()
            }), m.method("add_track", function(t) {
                if (t instanceof Array) {
                    for (var e = 0; e < t.length; e++) v.add_track(t[e]);
                    return v
                }
                return s.push(t), v
            }), m.method("tracks", function(t) {
                return arguments.length ? (function(t) {
                    for (var e = [], n = 0; n < t.length; n++) {
                        for (var r = !1, o = 0; o < s.length; o++)
                            if (s[o].id() === t[n].id()) {
                                r = !0, e[o] = !0;
                                break
                            }
                        r || (b(t[n]), y(t[n], {
                            from: u.from,
                            to: u.to
                        }))
                    }
                    for (var i = 0; i < s.length; i++) e[i] || s[i].g.remove();
                    s = t, x()
                }(t), this) : s
            }), m.method("width", function(t) {
                if (!arguments.length) return c;
                if (t < 50 && (t = 50), void 0 !== e) {
                    d3.select("#tnt_" + e).select("svg").attr("width", t), d3.select("#tnt_" + e).style("width", parseInt(t) + 6 + "px"), d3.select("#tnt_" + e + "_pane").attr("width", t), l.right.attr("x", t - 3), c = t, a.range([0, c]), _();
                    for (var n = 0; n < s.length; n++) s[n].g.select("rect").attr("width", t), s[n].display().scale(a), s[n].display().reset.call(s[n]), s[n].display().init.call(s[n], t), s[n].display().update.call(s[n], u)
                } else c = t;
                return v
            }), m.method("allow_drag", function(t) {
                return arguments.length ? ((p = t) ? void 0 !== a && i.call(d.x(a).scaleExtent([(u.to - u.from) / (h.zoom_out - 1), (u.to - u.from) / h.zoom_in]).on("zoom", j)) : d.x(d3.scale.linear()).on("zoom", null), v) : p
            });
            var x = function() {
                    for (var r = 0, o = 0; o < s.length; o++) {
                        var i = s[o];
                        i.g.attr("transform") ? i.g.transition().duration(500).attr("transform", "translate(" + g.extend_canvas.left + "," + r + ")") : i.g.attr("transform", "translate(" + g.extend_canvas.left + "," + r + ")"), r += i.height()
                    }
                    return t.attr("height", r + 20), d3.select("#tnt_" + e).style("height", r + 10 + 20 + "px"), d3.select("#tnt_" + e + "_5pcap").attr("height", r).each(function(t) {
                        A(this)
                    }), d3.select("#tnt_" + e + "_3pcap").attr("height", r).each(function(t) {
                        A(this)
                    }), n.attr("height", r + 20), v
                },
                b = function(e) {
                    return e.g = t.select("g").select("g").append("g").attr("class", "tnt_track").attr("height", e.height()), e.g.append("rect").attr("x", -5).attr("y", 0).attr("width", v.width()).attr("height", e.height()).style("fill", e.color()).style("pointer-events", "none"), e.display() && e.display().scale(a).init.call(e, c), v
                },
                w = function(t, e) {
                    var n, r = a.domain(),
                        o = r[1] - r[0],
                        i = o * t - o;
                    switch (e) {
                        case 1:
                            n = [~~r[0] - i, ~~(r[1] - i)];
                            break;
                        case -1:
                            n = [~~r[0] + i, ~~(r[1] - i)];
                            break;
                        case 0:
                            n = [r[0] - ~~(i / 2), r[1] + ~~i / 2]
                    }
                    var s = d3.interpolateNumber(r[0], n[0]),
                        c = g.ease,
                        u = 0;
                    d3.timer(function() {
                        var t, n = s(c(u));
                        switch (e) {
                            case -1:
                            case 1:
                                t = n + o;
                                break;
                            case 0:
                                t = r[1] + r[0] - n
                        }
                        var i = [n, t];
                        return a.domain(i), j(a), (u += .02) > 1
                    })
                },
                k = o(function() {
                    var t = a.domain();
                    v.from(~~t[0]), v.to(~~t[1]);
                    for (var e = 0; e < s.length; e++) {
                        var n = s[e];
                        y(n, u)
                    }
                }, 300),
                j = function(t) {
                    void 0 !== t && p && d.x(t);
                    var n = a.domain();
                    n[0] <= h.min + 5 && d3.select("#tnt_" + e + "_5pcap").attr("width", 3).transition().duration(200).attr("width", 0), n[1] >= h.max - 5 && d3.select("#tnt_" + e + "_3pcap").attr("width", 3).transition().duration(200).attr("width", 0), n[0] < h.min ? d.translate([d.translate()[0] - a(h.min) + a.range()[0], d.translate()[1]]) : n[1] > h.max && d.translate([d.translate()[0] - a(h.max) + a.range()[1], d.translate()[1]]), k();
                    for (var r = 0; r < s.length; r++) {
                        var o = s[r];
                        o.display().mover.call(o)
                    }
                };

            function A(t) {
                t.parentNode.appendChild(t)
            }
            return v
        }
    }, {
        "tnt.api": 18,
        "tnt.utils": 33
    }],
    22: [function(t, e, n) {
        var r = t("tnt.api"),
            o = t("./spinner.js")();
        tnt_data = {}, tnt_data.sync = function() {
            var t = function(e) {
                this.data().elements(t.retriever().call(this, e.loc)), e.on_success()
            };
            return r(t).getset("elements", []).getset("retriever", function() {}), t
        }, tnt_data.async = function() {
            var t = function(e) {
                var n = this;
                o.on.call(n), t.retriever().call(n, e.loc).then(function(t) {
                    n.data().elements(t), e.on_success(), o.off.call(n)
                })
            };
            r(t).getset("elements", []).getset("retriever");
            return t
        }, tnt_data.empty = function() {
            return tnt_data.sync()
        }, e.exports = tnt_data
    }, {
        "./spinner.js": 26,
        "tnt.api": 18
    }],
    23: [function(t, e, n) {
        var r = t("tnt.api"),
            o = t("./layout.js"),
            i = function() {
                var t = d3.dispatch("click", "dblclick", "mouseover", "mouseout"),
                    e = {
                        create: function() {
                            throw "create_elem is not defined in the base feature object"
                        },
                        move: function() {
                            throw "move_elem is not defined in the base feature object"
                        },
                        distribute: function() {},
                        fixed: function() {},
                        index: void 0,
                        layout: o.identity(),
                        color: "#000",
                        scale: void 0
                    },
                    n = {};
                return r(n).getset(e).method({
                    reset: function() {
                        this.g.selectAll(".tnt_elem").remove(), this.g.selectAll(".tnt_guider").remove(), this.g.selectAll(".tnt_fixed").remove()
                    },
                    plot: function(n, r, o) {
                        n.on("click", function(e, n) {
                            d3.event.defaultPrevented || t.click.call(this, e, n)
                        }), n.on("mouseover", function(e, n) {
                            d3.event.defaultPrevented || t.mouseover.call(this, e, n)
                        }), n.on("dblclick", function(e, n) {
                            d3.event.defaultPrevented || t.dblclick.call(this, e, n)
                        }), n.on("mouseout", function(e, n) {
                            d3.event.defaultPrevented || t.mouseout.call(this, e, n)
                        }), e.create.call(r, n, o)
                    },
                    update: function(t, r) {
                        var o = this.g,
                            i = this.data().elements();
                        void 0 !== r && (i = i[r]);
                        var a, s, c = e.layout.call(this, i);
                        void 0 !== c && (a = void 0 !== r ? o.selectAll(".tnt_elem_" + r) : o.selectAll(".tnt_elem"), s = e.index ? a.data(c, function(t) {
                            if (void 0 !== t) return e.index(t)
                        }) : a.data(c), e.distribute.call(this, s, e.scale), s.enter().append("g").attr("class", "tnt_elem").classed("tnt_elem_" + r, r).call(n.plot, this, e.scale), s.exit().remove())
                    },
                    mover: function(t) {
                        var n, r = this.g;
                        n = void 0 !== t ? r.selectAll(".tnt_elem_" + t) : r.selectAll(".tnt_elem"), e.move.call(this, n)
                    },
                    init: function(t) {
                        this.g.append("text").attr("class", "tnt_fixed").attr("x", 5).attr("y", -2).attr("font-size", 11).attr("fill", "grey").text(this.label()), e.fixed.call(this, t)
                    },
                    move_to_front: function(t) {
                        void 0 !== t && this.g.selectAll(".tnt_elem_" + t).each(function() {
                            var t;
                            (t = this).parentNode.appendChild(t)
                        })
                    }
                }), d3.rebind(n, t, "on")
            };
        i.composite = function() {
            var t = {},
                e = [],
                n = {};
            return r(n).getset("scale").method({
                reset: function() {
                    for (var e in t) t.hasOwnProperty(e) && t[e].reset.call(this)
                },
                update: function() {
                    for (var n = 0; n < e.length; n++) t[e[n]].update.call(this, void 0, e[n]), t[e[n]].move_to_front.call(this, e[n])
                },
                mover: function() {
                    for (var e in t) t.hasOwnProperty(e) && t[e].mover.call(this, e)
                },
                init: function(e) {
                    for (var r in t) t.hasOwnProperty(r) && (t[r].scale(n.scale()), t[r].init.call(this, e))
                },
                add: function(r, o) {
                    return t[r] = o, e.push(r), n
                },
                displays: function() {
                    for (var n = [], r = 0; r < e.length; r++) n.push(t[e[r]]);
                    return n
                }
            }), n
        }, i.area = function() {
            var t, e = i.line(),
                n = e.line(),
                r = d3.svg.area().interpolate(n.interpolate()).tension(e.tension()),
                o = e.create();
            e.create(function(i) {
                var a = e.scale();
                void 0 !== t && this.g.select("path").remove(), o.call(this, i, a), r.x(n.x()).y1(n.y()).y0(this.height()), t = i.data(), i.remove(), this.g.append("path").attr("class", "tnt_area").classed("tnt_elem", !0).datum(t).attr("d", r).attr("fill", d3.rgb(e.color()).brighter())
            });
            var a = e.move();
            return e.move(function(o) {
                var i = e.scale();
                a.call(this, o, i), r.x(n.x()), this.g.select(".tnt_area").datum(t).attr("d", r)
            }), e
        }, i.line = function() {
            var t, e = i(),
                n = function(t) {
                    return t.pos
                },
                r = function(t) {
                    return t.val
                },
                o = .7,
                a = d3.scale.linear(),
                s = d3.svg.line().interpolate("basis");
            return e.line = function() {
                return s
            }, e.x = function(t) {
                return arguments.length ? (n = t, e) : n
            }, e.y = function(t) {
                return arguments.length ? (r = t, e) : r
            }, e.tension = function(t) {
                return arguments.length ? (o = t, e) : o
            }, e.create(function(i) {
                var c = this,
                    u = e.scale();
                void 0 !== t && c.g.select("path").remove(), s.tension(o).x(function(t) {
                    return u(n(t))
                }).y(function(t) {
                    return c.height() - a(r(t))
                }), t = i.data(), i.remove(), a.domain([0, 1]).range([0, c.height() - 2]), c.g.append("path").attr("class", "tnt_elem").attr("d", s(t)).style("stroke", e.color()).style("stroke-width", 4).style("fill", "none")
            }), e.move(function(r) {
                var o = e.scale();
                s.x(function(t) {
                    return o(n(t))
                }), this.g.select("path").attr("d", s(t))
            }), e
        }, i.conservation = function() {
            var t = i.area(),
                e = t.create();
            return t.create(function(n) {
                var r = t.scale();
                e.call(this, d3.select(n[0][0]), r)
            }), t
        }, i.ensembl = function() {
            var t = i(),
                e = "#7FFF00",
                n = "#00BB00";
            return t.fixed(function(e) {
                var n = ~~(this.height() - .8 * this.height()) / 2;
                this.g.append("line").attr("class", "tnt_guider tnt_fixed").attr("x1", 0).attr("x2", e).attr("y1", n).attr("y2", n).style("stroke", t.color()).style("stroke-width", 1), this.g.append("line").attr("class", "tnt_guider tnt_fixed").attr("x1", 0).attr("x2", e).attr("y1", this.height() - n).attr("y2", this.height() - n).style("stroke", t.color()).style("stroke-width", 1)
            }), t.create(function(e) {
                var n = t.scale(),
                    r = ~~(this.height() - .8 * this.height()) / 2;
                e.append("rect").attr("x", function(t) {
                    return n(t.start)
                }).attr("y", r).attr("width", function(t) {
                    return n(t.end) - n(t.start)
                }).attr("height", this.height() - ~~(2 * r)).attr("fill", this.color()).transition().duration(500).attr("fill", function(e) {
                    return "high" === e.type ? d3.rgb(t.color()) : "low" === e.type ? d3.rgb(t.color2()) : d3.rgb(t.color3())
                })
            }), t.distribute(function(e) {
                var n = t.scale();
                e.select("rect").attr("width", function(t) {
                    return n(t.end) - n(t.start)
                })
            }), t.move(function(e) {
                var n = t.scale();
                e.select("rect").attr("x", function(t) {
                    return n(t.start)
                }).attr("width", function(t) {
                    return n(t.end) - n(t.start)
                })
            }), t.color2 = function(n) {
                return arguments.length ? (e = n, t) : e
            }, t.color3 = function(e) {
                return arguments.length ? (n = e, t) : n
            }, t
        }, i.vline = function() {
            var t = i();
            return t.create(function(e) {
                var n = t.scale();
                e.append("line").attr("x1", function(e) {
                    return n(t.index()(e))
                }).attr("x2", function(e) {
                    return n(t.index()(e))
                }).attr("y1", 0).attr("y2", this.height()).attr("stroke", t.color()).attr("stroke-width", 1)
            }), t.move(function(e) {
                var n = t.scale();
                e.select("line").attr("x1", function(e) {
                    return n(t.index()(e))
                }).attr("x2", function(e) {
                    return n(t.index()(e))
                })
            }), t
        }, i.pin = function() {
            var t = i(),
                e = d3.scale.linear().domain([0, 0]).range([0, 0]),
                n = {
                    pos: d3.functor("pos"),
                    val: d3.functor("val"),
                    domain: [0, 0]
                };
            return r(t).getset(n), t.create(function(r) {
                var o = this,
                    i = t.scale();
                e.domain(t.domain()).range([5, o.height() - 5 - 10]), r.append("line").attr("x1", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).attr("y1", function(t) {
                    return o.height()
                }).attr("x2", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).attr("y2", function(t, r) {
                    return o.height() - e(t[n.val(t, r)])
                }).attr("stroke", function(e) {
                    return d3.functor(t.color())(e)
                }), r.append("circle").attr("cx", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).attr("cy", function(t, r) {
                    return o.height() - e(t[n.val(t, r)])
                }).attr("r", 5).attr("fill", function(e) {
                    return d3.functor(t.color())(e)
                }), r.append("text").attr("font-size", "13").attr("x", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).attr("y", function(t, e) {
                    return 10
                }).style("text-anchor", "middle").style("fill", function(e) {
                    return d3.functor(t.color())(e)
                }).text(function(t) {
                    return t.label || ""
                })
            }), t.distribute(function(t) {
                t.select("text").text(function(t) {
                    return t.label || ""
                })
            }), t.move(function(r) {
                var o = this,
                    i = t.scale();
                r.select("line").attr("x1", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).attr("y1", function(t) {
                    return o.height()
                }).attr("x2", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).attr("y2", function(t, r) {
                    return o.height() - e(t[n.val(t, r)])
                }), r.select("circle").attr("cx", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).attr("cy", function(t, r) {
                    return o.height() - e(t[n.val(t, r)])
                }), r.select("text").attr("x", function(t, e) {
                    return i(t[n.pos(t, e)])
                }).text(function(t) {
                    return t.label || ""
                })
            }), t.fixed(function(t) {
                this.g.append("line").attr("class", "tnt_fixed").attr("x1", 0).attr("x2", t).attr("y1", this.height()).attr("y2", this.height()).style("stroke", "black").style("stroke-with", "1px")
            }), t
        }, i.block = function() {
            var t = i();
            return r(t).getset("from", function(t) {
                return t.start
            }).getset("to", function(t) {
                return t.end
            }), t.create(function(e) {
                var n = t.scale();
                e.append("rect").attr("x", function(e, r) {
                    return n(t.from()(e, r))
                }).attr("y", 0).attr("width", function(e, r) {
                    return n(t.to()(e, r)) - n(t.from()(e, r))
                }).attr("height", this.height()).attr("fill", this.color()).transition().duration(500).attr("fill", function(e) {
                    return void 0 === e.color ? t.color() : e.color
                })
            }), t.distribute(function(e) {
                var n = t.scale();
                e.select("rect").attr("width", function(t) {
                    return n(t.end) - n(t.start)
                })
            }), t.move(function(e) {
                var n = t.scale();
                e.select("rect").attr("x", function(t) {
                    return n(t.start)
                }).attr("width", function(t) {
                    return n(t.end) - n(t.start)
                })
            }), t
        }, i.axis = function() {
            var t, e, n = "top",
                r = {
                    reset: function() {
                        t = void 0;
                        this.g.selectAll(".tick").remove()
                    },
                    plot: function() {},
                    mover: function() {
                        this.g.call(t)
                    },
                    init: function() {
                        t = void 0
                    },
                    update: function() {
                        void 0 === t && (t = d3.svg.axis().scale(e).orient(n));
                        this.g.call(t)
                    },
                    orientation: function(t) {
                        return arguments.length ? (n = t, this) : n
                    },
                    scale: function(t) {
                        return arguments.length ? (e = t, this) : e
                    }
                };
            return r
        }, i.location = function() {
            var t, e, n = {
                reset: function() {
                    t = void 0
                },
                plot: function() {},
                init: function() {
                    t = void 0;
                    this.g.select("text").remove()
                },
                mover: function() {
                    var n = e.domain();
                    t.select("text").text("Location: " + ~~n[0] + "-" + ~~n[1])
                },
                scale: function(t) {
                    return arguments.length ? (e = t, this) : e
                },
                update: function(n) {
                    var r = this.g,
                        o = e.domain();
                    void 0 === t && (t = r).append("text").text("Location: " + Math.round(o[0]) + "-" + Math.round(o[1]))
                }
            };
            return n
        }, e.exports = i
    }, {
        "./layout.js": 25,
        "tnt.api": 18
    }],
    24: [function(t, e, n) {
        var r = t("./board.js");
        r.track = t("./track"), r.track.data = t("./data.js"), r.track.layout = t("./layout.js"), r.track.feature = t("./feature.js"), r.track.layout = t("./layout.js"), e.exports = r
    }, {
        "./board.js": 21,
        "./data.js": 22,
        "./feature.js": 23,
        "./layout.js": 25,
        "./track": 27
    }],
    25: [function(t, e, n) {
        var r = t("tnt.api"),
            o = function() {
                var t = function(e) {
                    return t.elements().call(this, e), e
                };
                r(t).getset("elements", function() {});
                return t
            };
        o.identity = function() {
            return o().elements(function(t) {
                return t
            })
        }, e.exports = o
    }, {
        "tnt.api": 18
    }],
    26: [function(t, e, n) {
        e.exports = function() {
            var t, e = {};

            function n(t, e, n) {
                t.append("rect").attr("x", "46.5").attr("y", "40").attr("width", "7").attr("height", "20").attr("rx", "5").attr("ry", "5").attr("fill", d3.rgb(n).darker(2)).attr("transform", "rotate(" + 30 * e + " 50 50) translate(0 -30)").append("animate").attr("attributeName", "opacity").attr("from", "1").attr("to", "0").attr("dur", "1s").attr("begin", 1 / 12 * e + "s").attr("repeatCount", "indefinite")
            }
            return e.on = function() {
                if (this.spinner ? this.spinner++ : this.spinner = 1, 1 == this.spinner) {
                    var e = this.g,
                        r = this.color();
                    (t = e.append("svg").attr("class", "tnt_spinner").attr("width", "30px").attr("height", "30px").attr("xmls", "http://www.w3.org/2000/svg").attr("viewBox", "0 0 100 100").attr("preserveAspectRatio", "xMidYMid")).append("rect").attr("x", "0").attr("y", "0").attr("width", "100").attr("height", "100").attr("rx", "50").attr("ry", "50").attr("fill", r);
                    for (var o = 0; o < 12; o++) n(t, o, r)
                } else if (this.spinner > 0) {
                    var i = t.node();
                    i.parentNode && i.parentNode.appendChild(i)
                }
            }, e.off = function() {
                this.spinner--, this.spinner || this.g.selectAll(".tnt_spinner").remove()
            }, e
        }
    }, {}],
    27: [function(t, e, n) {
        var r = t("tnt.api"),
            o = t("tnt.utils").iterator,
            i = function() {
                "use strict";
                var t, e = {
                        color: d3.rgb("#CCCCCC"),
                        height: 250,
                        data: i.data.empty(),
                        label: "",
                        id: i.id()
                    },
                    n = {};
                r(n).getset(e);
                return n.display = function(n) {
                    if (!arguments.length) return t;
                    if ("function" == typeof(t = n)) t.layout && t.layout().height(e.height);
                    else
                        for (var r in t) t.hasOwnProperty(r) && t[r].layout && t[r].layout().height(e.height);
                    return this
                }, n
            };
        i.id = o(1), e.exports = i
    }, {
        "tnt.api": 18,
        "tnt.utils": 33
    }],
    28: [function(t, e, n) {
        e.exports = tnt_rest = t("./src/rest.js")
    }, {
        "./src/rest.js": 31
    }],
    29: [function(t, e, n) {
        e.exports = t(18)
    }, {
        "./src/api.js": 30
    }],
    30: [function(t, e, n) {
        e.exports = t(19)
    }, {}],
    31: [function(t, e, n) {
        var r = t("httpplease"),
            o = t("tnt.api"),
            i = t("httpplease-promises"),
            a = t("es6-promise").Promise,
            s = t("httpplease/plugins/json");
        r = r.use(s).use(i(a)), tnt_rest = function() {
            var e = {
                    prefix: "",
                    protocol: "http",
                    domain: "",
                    port: ""
                },
                n = {};
            return n.url = t("./url.js"), o(n).getset(e).method("call", function(t, n) {
                var o;
                return "string" == typeof t ? o = t : (t._prefix(e.prefix)._protocol(e.protocol)._domain(e.domain)._port(e.port), o = t()), n ? r.post({
                    url: o,
                    body: n
                }) : r.get({
                    url: o
                })
            }), n
        }, e.exports = tnt_rest
    }, {
        "./url.js": 32,
        "es6-promise": 3,
        httpplease: 7,
        "httpplease-promises": 5,
        "httpplease/plugins/json": 15,
        "tnt.api": 29
    }],
    32: [function(t, e, n) {
        var r = t("tnt.api");
        e.exports = function() {
            var t = /:\w+/g,
                e = {
                    _prefix: "",
                    _protocol: "http",
                    _domain: "",
                    _port: "",
                    endpoint: "",
                    parameters: {},
                    fragment: "",
                    rest: void 0
                },
                n = function() {
                    return n = e.endpoint.replace(t, function(t) {
                        t = t.substring(1, t.length);
                        var n = e.parameters[t] || "";
                        return delete e.parameters[t], n
                    }), e._prefix + (e._protocol ? e._protocol + "://" : "") + e._domain + (e._port ? ":" + e._port : "") + "/" + n + function() {
                        void 0 === e.parameters["content-type"] && (e.parameters["content-type"] = "application/json");
                        var t = Object.keys(e.parameters).map(function(t) {
                            return t + "=" + function t(n) {
                                var r = e.parameters[n];
                                if (!Array.isArray(r)) return r;
                                var o = r.shift();
                                return r.length ? o + "&" + n + "=" + t(n) : o
                            }(t)
                        }).join("&");
                        return t ? "?" + t : t
                    }() + (e.fragment ? "#" + e.fragment : "");
                    var n
                };
            r(n).getset(e);
            return n
        }
    }, {
        "tnt.api": 29
    }],
    33: [function(t, e, n) {
        e.exports = t("./src/index.js")
    }, {
        "./src/index.js": 34
    }],
    34: [function(t, e, n) {
        var r = t("./utils.js");
        r.reduce = t("./reduce.js"), r.png = t("./png.js"), e.exports = r
    }, {
        "./png.js": 35,
        "./reduce.js": 36,
        "./utils.js": 37
    }],
    35: [function(t, e, n) {
        var r = function() {
            var t, e = 1,
                n = function() {},
                r = function(r) {
                    r = r.node();
                    var o, i, a;
                    o = function() {
                        var o = document.createElement("div"),
                            i = r.cloneNode(!0),
                            a = parseInt(i.getAttribute("width")),
                            s = parseInt(i.getAttribute("height"));
                        i.setAttribute("version", "1.1"), i.setAttribute("xmlns", "http://www.w3.org/2000/svg"), i.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink"), i.setAttribute("width", a * e), i.setAttribute("height", s * e);
                        var c = document.createElement("g");
                        c.setAttribute("transform", "scale(" + e + ")"), i.appendChild(function(t, e) {
                            for (var n = t.children || t.childNodes; n.length > 0;) {
                                var r = n[0];
                                1 === r.nodeType && e.appendChild(r)
                            }
                            return e
                        }(i, c)), o.appendChild(i), i.insertBefore(function(e) {
                            for (var n = "", r = document.styleSheets, o = 0; o < r.length; o++) {
                                var i = r[o].href || "";
                                if (t) {
                                    for (var a = !0, s = 0; s < t.length; s++)
                                        if (i.indexOf(t[s]) > -1) {
                                            a = !1;
                                            break
                                        }
                                    if (a) continue
                                }
                                for (var c = r[o].cssRules || [], u = 0; u < c.length; u++) {
                                    var l = c[u];
                                    void 0 !== l.style && e.querySelectorAll(l.selectorText).length > 0 && (n += l.selectorText + " { " + l.style.cssText + " }\n")
                                }
                            }
                            var f = e.querySelector("defs") || document.createElement("defs"),
                                d = document.createElement("style");
                            return d.setAttribute("type", "text/css"), d.innerHTML = "<![CDATA[\n" + n + "\n]]>", f.appendChild(d), f
                        }(i), i.firstChild);
                        var u = '<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">' + o.innerHTML;
                        u = u.replace("none", "block");
                        var l = new Image;
                        l.src = "data:image/svg+xml;base64," + window.btoa(unescape(encodeURIComponent(u))), l.onload = function() {
                            var t = document.createElement("canvas");
                            t.width = l.width, t.height = l.height, t.getContext("2d").drawImage(l, 0, 0);
                            var e = t.toDataURL("image/png");
                            n(e)
                        }
                    }, i = d3.select(r).selectAll("image"), 0 === (a = i[0].length) && o(), i.each(function() {
                        var t = d3.select(this),
                            e = new Image;
                        e.onload = function() {
                            var n = document.createElement("canvas"),
                                r = n.getContext("2d");
                            n.width = e.width, n.height = e.height, r.drawImage(e, 0, 0);
                            var i = n.toDataURL("image/png");
                            t.attr("href", i), 0 == --a && o()
                        }, e.src = t.attr("href")
                    })
                };
            return r.scale_factor = function(t) {
                return arguments.length ? (e = t, this) : e
            }, r.callback = function(t) {
                return arguments.length ? (n = t, this) : n
            }, r.stylesheets = function(e) {
                return arguments.length ? (t = e, this) : t
            }, r
        };
        e.exports = function() {
            var t = "image.png",
                e = {
                    limit: 1 / 0,
                    onError: function() {
                        console.log("image too large")
                    }
                },
                n = r().callback(function(n) {
                    var r = document.createElement("a");
                    r.download = t, r.href = n, document.body.appendChild(r), r.href.length > e.limit ? (r.parentNode.removeChild(r), e.onError()) : r.click()
                });
            return n.filename = function(e) {
                return arguments.length ? (t = e, n) : t
            }, n.limit = function(t) {
                return arguments.length ? (e = t, this) : e
            }, n
        }
    }, {}],
    36: [function(t, e, n) {
        var r = function() {
            var t = 5,
                e = "val",
                n = function(t, e) {
                    return t < e ? e - t <= .2 * e : t - e <= .2 * t
                },
                r = function(t) {
                    return t
                },
                o = function(t) {
                    if (!t.length) return t;
                    var e = s(t);
                    return r(e)
                },
                i = function(t, n) {
                    if (n.sort(function(t, n) {
                            return t[e] - n[e]
                        }), n.length % 2) t[e] = n[~~(n.length / 2)][e];
                    else {
                        var r = ~~(n.length / 2) - 1;
                        t[e] = (n[r][e] + n[r + 1][e]) / 2
                    }
                    return t
                },
                a = function(t) {
                    var e = {};
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]);
                    return e
                },
                s = function(e) {
                    if (0 === t) return e;
                    for (var n = [], r = 0; r < e.length; r++) {
                        var o = r < t ? 0 : r - t,
                            s = r > e.length - t ? e.length : r + t;
                        n[r] = i(a(e[r]), e.slice(o, s + 1))
                    }
                    return n
                };
            return o.reducer = function(t) {
                return arguments.length ? (r = t, o) : r
            }, o.redundant = function(t) {
                return arguments.length ? (n = t, o) : n
            }, o.value = function(t) {
                return arguments.length ? (e = t, o) : e
            }, o.smooth = function(e) {
                return arguments.length ? (t = e, o) : t
            }, o
        };
        e.exports = r, e.exports.line = function() {
            var t = r();
            return t.reducer(function(e) {
                for (var n = t.redundant(), r = t.value(), o = [], i = e[0], a = 1; a < e.length - 1; a++) n(e[a][r], i[r]) || (o.push(i), i = e[a]);
                return o.push(i), o.push(e[e.length - 1]), o
            }), t
        }, e.exports.block = function() {
            var t = r().value("start"),
                e = "end",
                n = function(n, r) {
                    return {
                        object: {
                            start: n.object[t.value()],
                            end: r[e]
                        },
                        value: r[e]
                    }
                };
            return t.reducer(function(r) {
                for (var o = t.value(), i = t.redundant(), a = [], s = {
                        object: r[0],
                        value: r[0][e]
                    }, c = 1; c < r.length; c++) i(r[c][o], s.value) ? s = n(s, r[c]) : (a.push(s.object), s.object = r[c], s.value = r[c].end);
                return a.push(s.object), a
            }), r.join = function(e) {
                return arguments.length ? (n = e, t) : n
            }, r.value2 = function(n) {
                return arguments.length ? (e = n, t) : e
            }, t
        }
    }, {}],
    37: [function(t, e, n) {
        e.exports = {
            iterator: function(t) {
                var e = t || 0;
                return function() {
                    return e++
                }
            },
            script_path: function(t) {
                var e = t.replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&"),
                    n = new RegExp(e + "$"),
                    r = new RegExp("(.*)" + e + "$"),
                    o = document.getElementsByTagName("script");
                if (void 0 !== o)
                    for (var i in o)
                        if (o[i].src && o[i].src.match(n)) return o[i].src.replace(r, "$1");
                return ""
            },
            defer_cancel: function(t, e) {
                var n;
                return function() {
                    var r = Array.prototype.slice.call(arguments),
                        o = this;
                    clearTimeout(n), n = setTimeout(function() {
                        t.apply(o, r)
                    }, e)
                }
            }
        }
    }, {}],
    38: [function(t, e, n) {
        var r = t("tnt.board"),
            o = t("tnt.api");

        function i(t) {
            for (var e = t.exons, n = [], r = 0; r < e.length - 1; r++) {
                var o = {
                    start: 1 === e[r].transcript.strand ? e[r].end : e[r].start,
                    end: 1 === e[r].transcript.strand ? e[r + 1].start : e[r + 1].end,
                    transcript: t
                };
                n.push(o)
            }
            return n
        }

        function a(t) {
            var e, n;
            void 0 !== t.Translation && (e = t.Translation.start, n = t.Translation.end);
            var r = t.Exon,
                o = [];
            if (r)
                for (var i = 0; i < r.length; i++)
                    if (void 0 === t.Translation) o.push({
                        start: r[i].start,
                        end: r[i].end,
                        transcript: t,
                        coding: !1,
                        offset: r[i].start - t.start
                    });
                    else if (r[i].start < e)
                if (r[i].end < e) o.push({
                    start: r[i].start,
                    end: r[i].end,
                    transcript: t,
                    coding: !1,
                    offset: r[i].start - t.start
                });
                else {
                    var a = {
                            start: r[i].start,
                            end: e,
                            transcript: t,
                            coding: !1,
                            offset: r[i].start - t.start
                        },
                        s = {
                            start: e,
                            end: r[i].end,
                            transcript: t,
                            coding: !0,
                            offset: e - t.start
                        };
                    1 === r[i].strand ? (o.push(a), o.push(s)) : (o.push(s), o.push(a))
                } else if (r[i].end > n)
                if (r[i].start > n) o.push({
                    start: r[i].start,
                    end: r[i].end,
                    transcript: t,
                    coding: !1,
                    offset: r[i].start - t.start
                });
                else {
                    var c = {
                            start: r[i].start,
                            end: n,
                            transcript: t,
                            coding: !0,
                            offset: r[i].start - t.start
                        },
                        u = {
                            start: n,
                            end: r[i].end,
                            transcript: t,
                            coding: !1,
                            offset: n - t.start
                        };
                    1 === r[i].strand ? (o.push(c), o.push(u)) : (o.push(u), o.push(c))
                } else o.push({
                start: r[i].start,
                end: r[i].end,
                transcript: t,
                coding: !0,
                offset: r[i].start - t.start
            });
            return o
        }
        var s = {
            gene: function() {
                var t = r.track.data.genome.ensembl,
                    e = r.track.data.async().retriever(function(e) {
                        var n = t.url().endpoint("overlap/region/:species/:region").parameters({
                            species: e.species,
                            region: e.chr + ":" + e.from + "-" + e.to,
                            feature: e.features || ["gene"]
                        });
                        return t.call(n).then(function(t) {
                            for (var e = t.body, n = 0; n < e.length; n++) {
                                var r = e[n]; - 1 === r.strand ? r.display_label = "<" + r.external_name : r.display_label = r.external_name + ">"
                            }
                            return e
                        })
                    });
                return o(e).getset("ensembl"), e
            },
            sequence: function() {
                var t = r.track.data.genome.ensembl,
                    e = r.track.data.async().retriever(function(n) {
                        if (n.to - n.from < e.limit()) {
                            var r = t.url().endpoint("/sequence/region/:species/:region").parameters({
                                species: n.species,
                                region: n.chr + ":" + n.from + ".." + n.to
                            });
                            return t.call(r).then(function(t) {
                                for (var e = t.body, n = e.id.split(":")[3], r = [], o = 0; o < e.seq.length; o++) r.push({
                                    pos: +n + o,
                                    sequence: e.seq[o]
                                });
                                return r
                            })
                        }
                        return new Promise(function(t, e) {
                            t([])
                        })
                    });
                return o(e).getset("limit", 150), e
            },
            transcript: function() {
                var t = r.track.data.genome.ensembl,
                    e = r.track.data.async().retriever(function(n) {
                        var r = t.url().endpoint("overlap/region/:species/:region").parameters({
                            species: n.species,
                            region: n.chr + ":" + n.from + "-" + n.to,
                            feature: ["gene", "transcript", "exon", "cds"]
                        });
                        return t.call(r).then(function(t) {
                            for (var n = t.body, r = e.region2genes(n), o = [], i = 0; i < r.length; i++) {
                                var a = r[i],
                                    s = e.gene2Transcripts(a);
                                o = o.concat(s)
                            }
                            return o
                        })
                    });
                return o(e).method("gene2Transcripts", function(t) {
                    for (var e = t.Transcript, n = [], r = 0; r < e.length; r++) {
                        var o = e[r];
                        o.exons = a(o), o.introns = i(o), o.display_label = 1 === o.strand ? o.display_name + ">" : "<" + o.display_name, o.key = o.id + "_" + o.exons.length, o.gene = t, n.push(o)
                    }
                    return n
                }).method("region2genes", function(t) {
                    for (var e = {}, n = [], r = {}, o = 0; o < t.length; o++) "transcript" == (u = t[o]).feature_type && (u.display_name = u.external_name, r[u.id] = u, void 0 === e[u.Parent] && (e[u.Parent] = []), e[u.Parent].push(u));
                    for (var i = 0; i < t.length; i++) "exon" === (u = t[i]).feature_type && (void 0 === (s = r[u.Parent]).Exon && (s.Exon = []), s.Exon.push(u));
                    for (var a = 0; a < t.length; a++) {
                        var s;
                        "cds" === (u = t[a]).feature_type && (void 0 === (s = r[u.Parent]).Translation && (s.Translation = u), u.start < s.Translation.start && (s.Translation.start = u.start), u.end > s.Translation.end && (s.Translation.end = u.end))
                    }
                    for (var c = 0; c < t.length; c++) {
                        var u;
                        "gene" === (u = t[c]).feature_type && (u.display_name = u.external_name, u.Transcript = e[u.id], n.push(u))
                    }
                    return n
                }), e
            },
            canonical: function() {
                var t = r.track.data.genome.ensembl;
                return r.track.data.async().retriever(function(e) {
                    var n = t.url().endpoint("overlap/region/:species/:region").parameters({
                        species: e.species,
                        region: e.chr + ":" + e.from + "-" + e.to,
                        feature: ["gene"]
                    });
                    return t.call(n).then(function(e) {
                        var n = e.body.map(function(t) {
                                return t.id
                            }),
                            r = t.url().endpoint("/lookup/id");
                        return t.call(r, {
                            ids: n,
                            expand: 1
                        })
                    }).then(function(t) {
                        var e = [];
                        for (var n in t.body)
                            if (t.body.hasOwnProperty(n))
                                for (var r = 0; r < t.body[n].Transcript.length; r++) {
                                    var o = t.body[n].Transcript[r];
                                    o.is_canonical && (o.gene = t.body[n], o.display_label = 1 === o.strand ? o.display_name + ">" : "<" + o.display_name, o.exons = a(o), o.introns = i(o), o.key = o.id + "_" + o.exons.length, e.push(o))
                                }
                            return e
                    })
                })
            }
        };
        e.exports = s
    }, {
        "tnt.api": 18,
        "tnt.board": 20
    }],
    39: [function(t, e, n) {
        var r = t("tnt.api"),
            o = (t("./layout.js"), t("tnt.board")),
            i = {
                gene: function() {
                    var t = o.track.feature().layout(o.track.layout.genome()).index(function(t) {
                        return t.id
                    });
                    return t.create(function(e) {
                        var n = t.scale();
                        e.append("rect").attr("x", function(t) {
                            return n(t.start)
                        }).attr("y", function(e) {
                            return t.layout().gene_slot().slot_height * e.slot
                        }).attr("width", function(t) {
                            return n(t.end) - n(t.start)
                        }).attr("height", t.layout().gene_slot().gene_height).attr("fill", this.color()).transition().duration(500).attr("fill", function(e) {
                            return void 0 === e.color ? t.color() : e.color
                        }), e.append("text").attr("class", "tnt_name").attr("x", function(t) {
                            return n(t.start)
                        }).attr("y", function(e) {
                            return t.layout().gene_slot().slot_height * e.slot + 25
                        }).attr("fill", this.color()).text(function(e) {
                            return t.layout().gene_slot().show_label ? e.display_label : ""
                        }).style("font-weight", "normal").transition().duration(500).attr("fill", function() {
                            return t.color()
                        })
                    }), t.distribute(function(e) {
                        e.select("rect").transition().duration(500).attr("y", function(e) {
                            return t.layout().gene_slot().slot_height * e.slot
                        }).attr("height", t.layout().gene_slot().gene_height), e.select("text").transition().duration(500).attr("y", function(e) {
                            return t.layout().gene_slot().slot_height * e.slot + 25
                        }).text(function(e) {
                            return t.layout().gene_slot().show_label ? e.display_label : ""
                        })
                    }), t.move(function(e) {
                        var n = t.scale();
                        e.select("rect").attr("x", function(t) {
                            return n(t.start)
                        }).attr("width", function(t) {
                            return n(t.end) - n(t.start)
                        }), e.select("text").attr("x", function(t) {
                            return n(t.start)
                        })
                    }), t
                },
                sequence: function() {
                    var t = {
                            fontsize: 10,
                            sequence: function(t) {
                                return t.sequence
                            }
                        },
                        e = o.track.feature().index(function(t) {
                            return t.pos
                        });
                    r(e).getset(t);
                    return e.create(function(n) {
                        var r = this,
                            o = e.scale();
                        n.append("text").attr("fill", r.color()).style("font-size", t.fontsize + "px").attr("x", function(e) {
                            return o(e.pos) - t.fontsize / 2 + 1
                        }).attr("y", function(t) {
                            return 5 + ~~(r.height() / 2)
                        }).style("font-family", '"Lucida Console", Monaco, monospace').text(t.sequence).transition().duration(500).attr("fill", e.color())
                    }), e.move(function(n) {
                        var r = e.scale();
                        n.select("text").attr("x", function(e) {
                            return r(e.pos) - t.fontsize / 2 + 1
                        })
                    }), e
                },
                transcript: function() {
                    var t = o.track.feature().layout(o.track.layout.genome()).index(function(t) {
                        return t.key
                    });
                    return t.create(function(e) {
                        var n = this,
                            r = t.scale(),
                            o = e.append("g").attr("transform", function(e) {
                                return "translate(" + r(e.start) + "," + t.layout().gene_slot().slot_height * e.slot + ")"
                            });
                        o.append("line").attr("x1", 0).attr("y1", ~~(t.layout().gene_slot().gene_height / 2)).attr("x2", function(t) {
                            return r(t.end) - r(t.start)
                        }).attr("y2", ~~(t.layout().gene_slot().gene_height / 2)).attr("fill", "none").attr("stroke", n.color()).attr("stroke-width", 2).transition().duration(500).attr("stroke", function(e) {
                            return t.color()(e)
                        }), e.each(function(t) {
                            if (t.exons)
                                for (var e = 0; e < t.exons.length; e++) t.exons[e].slot = t.slot
                        }), o.selectAll(".exons").data(function(t) {
                            return t.exons || []
                        }, function(t) {
                            return t.start
                        }).enter().append("rect").attr("class", "tnt_exons").attr("x", function(t) {
                            return r(t.start + t.offset) - r(t.start)
                        }).attr("y", 0).attr("width", function(t) {
                            return r(t.end) - r(t.start)
                        }).attr("height", t.layout().gene_slot().gene_height).attr("fill", n.color()).attr("stroke", n.color()).transition().duration(500).attr("stroke", function(e) {
                            return t.color()(e)
                        }).attr("fill", function(e) {
                            return e.coding ? t.color()(e) : !1 === e.coding ? n.color() : t.color()(e)
                        }), o.append("text").attr("class", "tnt_name").attr("x", 0).attr("y", 25).attr("fill", n.color()).text(function(e) {
                            return t.layout().gene_slot().show_label ? e.display_label : ""
                        }).style("font-weight", "normal").transition().duration(500).attr("fill", function(e) {
                            return t.color()(e)
                        })
                    }), t.distribute(function(e) {
                        var n = t.scale(),
                            r = e.select("g").transition().duration(200).attr("transform", function(e) {
                                return "translate(" + n(e.start) + "," + t.layout().gene_slot().slot_height * e.slot + ")"
                            });
                        r.selectAll("rect").attr("height", t.layout().gene_slot().gene_height), r.selectAll("line").attr("x2", function(t) {
                            return n(t.end) - n(t.start)
                        }).attr("y1", ~~(t.layout().gene_slot().gene_height / 2)).attr("y2", ~~(t.layout().gene_slot().gene_height / 2)), r.select("text").text(function(e) {
                            return t.layout().gene_slot().show_label ? e.display_label : ""
                        })
                    }), t.move(function(e) {
                        var n = t.scale(),
                            r = e.select("g").attr("transform", function(e) {
                                return "translate(" + n(e.start) + "," + t.layout().gene_slot().slot_height * e.slot + ")"
                            });
                        r.selectAll("line").attr("x2", function(t) {
                            return n(t.end) - n(t.start)
                        }).attr("y1", ~~(t.layout().gene_slot().gene_height / 2)).attr("y2", ~~(t.layout().gene_slot().gene_height / 2)), r.selectAll("rect").attr("width", function(t) {
                            return n(t.end) - n(t.start)
                        }), r.selectAll(".tnt_exons").attr("x", function(t) {
                            return n(t.start + t.offset) - n(t.start)
                        })
                    }), t
                },
                location: function() {
                    var t, e, n, r, o = function(t, e, n, r) {
                            return t + " " + e + ":" + n + "-" + r
                        },
                        i = {
                            reset: function() {},
                            plot: function() {},
                            init: function() {
                                e = void 0
                            },
                            mover: function() {
                                var t = i.scale().domain();
                                e.select("text").text(o(r, n, ~~t[0], ~~t[1]));
                               // Shiny.onInputChange("chr", n);
                               // Shiny.onInputChange("positionStart", ~~t[0]);
                               // Shiny.onInputChange("positionStop", ~~t[1]);
                            },
                            update: function(i) {
                                n = i.chr, r = i.species;
                                var a = this.g,
                                s = t.domain();
                                var node = document.getElementsByName("coord");
                                len = node.length;
                                  if(len>1){
                                    parentNode = node[0].parentNode;
                                    for(var i=1; i<len; i++) {
                                      parentNode.removeChild(node[i]);
                                    }
                                  }
                                var nodeText = document.getElementsByTagName('text')
                                parentNodeText = nodeText[0].parentNode;
                                len = parentNodeText.childNodes.length;
                                if(len>2){
                                  nodeC = parentNodeText.childNodes
                                  for(var i=2; i<len; i++) {
                                    parentNodeText.removeChild(nodeC[i]);
                                  }
                                }

                                // if (cC != null) {cC.parentNode.removeChild(cC);}
                                void 0 === e && ((e = a).append("text").attr("name","coord").text(o(r, n, ~~s[0], ~~s[1])));
                                Shiny.onInputChange("chr", n);
                                Shiny.onInputChange("positionStart", ~~s[0]);
                                Shiny.onInputChange("positionEnd", ~~s[1]);
                            },
                            scale: function(e) {
                                return arguments.length ? (t = e, this) : t
                            },
                            text: function(t) {
                                return arguments.length ? (o = t, this) : o
                            }
                        };
                    return i
                }
            };
        e.exports = i
    }, {
        "./layout.js": 42,
        "tnt.api": 18,
        "tnt.board": 20
    }],
    40: [function(t, e, n) {
        var r = t("tnt.api"),
            o = t("tnt.board");
        o.track.data.genome = t("./data.js"), o.track.feature.genome = t("./feature"), o.track.layout.genome = t("./layout"), o.track.data.genome.ensembl = t("tnt.rest")().protocol("https").domain("rest.ensembl.org");
        var i = new(0, t("es6-promise").Promise)(function(t) {
            t(0)
        });
        tnt_board_genome = function() {
            "use strict";
            var t = o.track.data.genome.ensembl,
                e = /^ENS\w+\d+$/,
                n = {
                    max_coord: void 0,
                    min_coord: i,
                    gene: void 0,
                    xref_search: function() {},
                    ensgene_search: function() {},
                    context: 0,
                    rest: t
                },
                a = o().zoom_in(200).zoom_out(5e6),
                s = o.track().height(20).color("#EEEEEE").data(o.track.data.empty()).display(o.track.feature.genome.location()),
                c = o.track().height(0).color("white").data(o.track.data.empty()).display(o.track.feature.axis()); 
            a.add_track(s).add_track(c), a.species("human").chr(7).from(139424940).to(141784100), a._start = a.start;
            var u = function(r) {
                    if (r.gene.match(e)) l(r.gene);
                    else {
                        var o = t.url().endpoint("xrefs/symbol/:species/:symbol").parameters({
                            species: r.species,
                            symbol: r.gene
                        });
                        t.call(o).then(function(t) {
                            var e = t.body;
                            void 0 !== (e = e.filter(function(t) {
                                return !t.id.indexOf("ENS")
                            }))[0] && l(e[0].id), n.xref_search(t, r.gene, r.species)
                        })
                    }
                },
                l = function(e) {
                    var r = t.url().endpoint("/lookup/id/:id").parameters({
                        id: e
                    });
                    t.call(r).then(function(t) {
                        var e = t.body;
                        n.ensgene_search(e);
                        var r = ~~((e.end - e.start) * (n.context / 100));
                        a.species(e.species).chr(e.seq_region_name).from(e.start - r).to(e.end + r), a.start({
                            species: e.species,
                            chr: e.seq_region_name,
                            from: e.start - r,
                            to: e.end + r
                        })
                    })
                },
                f = function(t) {
                    var e = /ortholog/,
                        n = /paralog/;
                    return {
                        orthologues: t.filter(function(t) {
                            return t.type.match(e)
                        }),
                        paralogues: t.filter(function(t) {
                            return t.type.match(n)
                        })
                    }
                };
            return r(a).getset(n).method({
                start: function(e) {
                    if (void 0 !== e) {
                        if (void 0 !== e.gene) return void u(e);
                        void 0 === e.species ? e.species = a.species() : a.species(e.species), void 0 === e.chr ? e.chr = a.chr() : a.chr(e.chr), void 0 === e.from ? e.from = a.from() : a.from(e.from), void 0 === e.to ? e.to = a.to() : a.to(e.to)
                    } else {
                        if (void 0 !== a.gene()) return void u({
                            species: a.species(),
                            gene: a.gene()
                        });
                        (e = {}).species = a.species(), e.chr = a.chr(), e.from = a.from(), e.to = a.to()
                    }
                    n.min_coord.then(function(r) {
                        if (a.min(r), !n.max_coord) {
                            var o = t.url().endpoint("info/assembly/:species/:region_name").parameters({
                                species: e.species,
                                region_name: e.chr
                            });
                            n.max_coord = t.call(o).then(function(t) {
                                return t.body.length
                            })
                        }
                        return n.max_coord
                    }).then(function(t) {
                        a.max(t), a._start()
                    })
                },
                homologues: function(e, n) {
                    var r = t.url.homologues({
                        id: e
                    });
                    t.call(r).then(function(t) {
                        var e = t.body.data[0].homologies;
                        if (void 0 !== n) {
                            var r = f(e);
                            n(r)
                        }
                    })
                }
            }), a
        }, e.exports = tnt_board_genome
    }, {
        "./data.js": 38,
        "./feature": 39,
        "./layout": 42,
        "es6-promise": 3,
        "tnt.api": 18,
        "tnt.board": 20,
        "tnt.rest": 28
    }],
    41: [function(t, e, n) {
        var r = t("tnt.board");
        r.genome = t("./genome"), e.exports = r
    }, {
        "./genome": 40,
        "tnt.board": 20
    }],
    42: [function(t, e, n) {
        var r = t("tnt.api");
        e.exports = function() {
            var t, e, n = [],
                o = {
                    expanded: {
                        slot_height: 30,
                        gene_height: 10,
                        show_label: !0
                    },
                    collapsed: {
                        slot_height: 10,
                        gene_height: 7,
                        show_label: !1
                    }
                },
                i = "expanded",
                a = function(r) {
                    e = this.display().scale();
                    for (var c = 0; c < r.length; c++) null === r[c].external_name && (r[c].external_name = "");
                    t = ~~(this.height() / o.expanded.slot_height), a.keep_slots() && u(r, n);
                    var l = s(r);
                    return o.collapsed.needed_slots = l, o.expanded.needed_slots = l, i = a.fixed_slot_type() ? a.fixed_slot_type() : l > t ? "collapsed" : "expanded", a.on_layout_run()(o, i), n = r, r
                },
                s = function(e) {
                    for (var n = [], r = e, o = 0, i = 0; i < e.length; i++) e[i].slot > o && e[i].slot < t && (o = e[i].slot);
                    for (var a = 0; a < r.length; a++) {
                        var s = f(n),
                            u = r[a];
                        if (void 0 !== u.slot && u.slot < t && c(u, s[u.slot])) n.push(u);
                        else
                            for (var l = 0;;) {
                                if (c(u, s[l])) {
                                    u.slot = l, n.push(u), l > o && (o = l);
                                    break
                                }
                                l++
                            }
                    }
                    return o + 1
                },
                c = function(t, n) {
                    if (void 0 === n) return !0;
                    for (var r = 0; r < n.length; r++) {
                        var o = n[r];
                        if (t.id !== o.id) {
                            var i = 8 * o.display_label.length + e(o.start),
                                a = e(o.start),
                                s = e(o.end) > i ? e(o.end) : i,
                                c = 8 * t.display_label.length + e(t.start),
                                u = e(t.start),
                                l = e(t.end) > c ? e(t.end) : c;
                            if (u <= a && l >= a || u >= a && u <= s) return !1
                        }
                    }
                    return !0
                },
                u = function(t, e) {
                    for (var n = l(e), r = 0; r < t.length; r++) void 0 !== n[t[r].id] && (t[r].slot = n[t[r].id])
                },
                l = function(t) {
                    for (var e = {}, n = 0; n < t.length; n++) {
                        var r = t[n];
                        e[r.id] = r.slot
                    }
                    return e
                },
                f = function(t) {
                    for (var e = [], n = 0; n < t.length; n++) void 0 === e[t[n].slot] && (e[t[n].slot] = []), e[t[n].slot].push(t[n]);
                    return e
                };
            r(a).getset("elements", function() {}).getset("on_layout_run", function() {}).getset("fixed_slot_type").getset("keep_slots", !0).method({
                gene_slot: function() {
                    return o[i]
                }
            });
            return a.fixed_slot_type.check(function(t) {
                return "collapsed" === t || "expanded" === t
            }), a
        }
    }, {
        "tnt.api": 18
    }]
}, {}, [1]);

